{% extends 'base.html' %}

{% block title %}–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ - Movie Finder{% endblock %}

{% block body %}
<div class="layout">
    <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –§–∏–ª—å—Ç—Ä—ã -->
    <aside class="sidebar">
        <!-- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é -->
        <h4>–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é</h4>
        <div class="search-box">
            <input id="searchInput" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞...">
        </div>

        <!-- –î–∏–∞–ø–∞–∑–æ–Ω –≥–æ–¥–æ–≤ -->
        <h4>–î–∏–∞–ø–∞–∑–æ–Ω –≥–æ–¥–æ–≤</h4>
        <div class="year-range-box">
            <input id="yearFrom" type="number" placeholder="–û—Ç" min="1900" max="2100">
            <input id="yearTo" type="number" placeholder="–î–æ" min="1900" max="2100">
            <select id="yearRangeGenre">
                <option value="">–í—Å–µ –∂–∞–Ω—Ä—ã</option>
            </select>
        </div>

        <!-- –ñ–∞–Ω—Ä—ã -->
        <h4>–ñ–∞–Ω—Ä—ã</h4>
        <div id="genresList" class="genres-list"></div>
        
        <!-- –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤ -->
        <button id="resetFilters" class="reset-filters-btn" onclick="resetAllFilters()">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
    </aside>

    <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –ö–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="content">
        <!-- –ë–ª–æ–∫ "–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ" -->
        <section class="content-section">
            <h2>üéØ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–∏–ª—å–º—ã</h2>
            <p>–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –Ω–µ–æ–±—ã—á–Ω—ã–µ –∏ –º–∞–ª–æ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ñ–∏–ª—å–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Å–ª—É–∂–∏–≤–∞—é—Ç –≤–∞—à–µ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è.</p>
            <div id="uniqueMovies" class="movies-grid"></div>
        </section>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
        <section id="searchResults" class="content-section" style="display: none;">
            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</h2>
            <div id="moviesList" class="movies-grid"></div>
            
            <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
            <div id="pagination" class="pagination">
                <button id="prevBtn" onclick="previousPage()" disabled>–ù–∞–∑–∞–¥</button>
                <span id="pageInfo">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1</span>
                <button id="nextBtn" onclick="nextPage()">–í–ø–µ—Ä—ë–¥</button>
            </div>
        </section>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ -->
        <div id="loadingMessage" class="status-message loading" style="display: none;">
            <div class="loader"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
        </div>
        
        <div id="noResultsMessage" class="status-message no-results" style="display: none;">
            <p>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã.</p>
        </div>
        
        <div id="errorMessage" class="status-message error" style="display: none;">
            <p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.</p>
            <button onclick="window.searchManager?.loadNewMovies()" class="retry-btn">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
        </div>
    </main>
</div>

<script>
// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è onclick –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
function performSearch() {
    if (window.searchManager) window.searchManager.searchByKeyword();
}

function searchByYearRange() {
    if (window.searchManager) window.searchManager.searchByYearRange();
}

function resetAllFilters() {
    if (window.searchManager) window.searchManager.resetAllFilters();
}

function previousPage() {
    if (window.searchManager) window.searchManager.previousPage();
}

function nextPage() {
    if (window.searchManager) window.searchManager.nextPage();
}
</script>
{% endblock %}
